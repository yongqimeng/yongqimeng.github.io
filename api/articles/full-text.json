{"title":"多行文本展开收起的实现方式","uid":"53e70211b9fa8a0658b9a8cefd096926","slug":"full-text","date":"2024-08-29T12:52:38.496Z","updated":"2024-08-29T12:53:19.195Z","comments":true,"path":"api/articles/full-text.json","keywords":null,"cover":"/images/cover1.jpg","content":"<p>多行文本超过指定行数，进行文本截断并显示省略号，并通过展开和收起来控制是否显示全部内容，调研很多种方式，目前这个是最合适的且最终的实现方案。</p>\n<p>具体代码</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div id=&quot;app&quot;&gt;</span><br><span class=\"line\">    &lt;div</span><br><span class=\"line\">      class=&quot;text-wrapper&quot;</span><br><span class=\"line\">      ref=&quot;wrapper&quot;</span><br><span class=\"line\">      :class=&quot;&#123; &#x27;text-wrapper-height&#x27;: isExpand &#125;&quot;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;div class=&quot;text-wrapper-inner&quot;&gt;</span><br><span class=\"line\">        &lt;div</span><br><span class=\"line\">          class=&quot;text-wrapper-fulltext&quot;</span><br><span class=\"line\">          @click=&quot;onActionClick&quot;</span><br><span class=\"line\">          v-if=&quot;showFillText&quot;</span><br><span class=\"line\">        &gt;</span><br><span class=\"line\">          &#123;&#123; !isExpand ? &quot;...全文&quot; : &quot;收起&quot; &#125;&#125;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &lt;div class=&quot;text-wrapper-text&quot; ref=&quot;text&quot;&gt;</span><br><span class=\"line\">          这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    return &#123;</span><br><span class=\"line\">      showFillText: false,</span><br><span class=\"line\">      isExpand: false</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  mounted() &#123;</span><br><span class=\"line\">    this.titleHeight();</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    titleHeight() &#123;</span><br><span class=\"line\">      const &#123; text, wrapper &#125; = this.$refs;</span><br><span class=\"line\">      const wrapperScrollHeight = wrapper?.scrollHeight || 0;</span><br><span class=\"line\">      const wrapperHeight = wrapper?.offsetHeight || 0;</span><br><span class=\"line\">      const contentHeight = text?.offsetHeight || 0;</span><br><span class=\"line\">      if (</span><br><span class=\"line\">        wrapperScrollHeight &gt; wrapperHeight + 10 ||</span><br><span class=\"line\">        contentHeight &gt; wrapperHeight</span><br><span class=\"line\">      ) &#123;</span><br><span class=\"line\">        this.showFillText = true;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    onActionClick() &#123;</span><br><span class=\"line\">      this.isExpand = !this.isExpand;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">body &#123;</span><br><span class=\"line\">  height: 100vh;</span><br><span class=\"line\">  display: flex;</span><br><span class=\"line\">  flex-direction: column;</span><br><span class=\"line\">  align-items: center;</span><br><span class=\"line\">  justify-content: center;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">#app &#123;</span><br><span class=\"line\">  width: 390px;</span><br><span class=\"line\">  height: auto;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.text-wrapper &#123;</span><br><span class=\"line\">  display: flex;</span><br><span class=\"line\">  max-height: 72px;</span><br><span class=\"line\">  overflow: hidden;</span><br><span class=\"line\">  position: relative;</span><br><span class=\"line\">  word-break: break-all;</span><br><span class=\"line\">  transition: max-height 0.2s linear;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.text-wrapper.text-wrapper-height &#123;</span><br><span class=\"line\">  max-height: 400px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.text-wrapper-inner &#123;</span><br><span class=\"line\">  width: 100%;</span><br><span class=\"line\">  position: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.text-wrapper-inner::before &#123;</span><br><span class=\"line\">  content: &quot;&quot;;</span><br><span class=\"line\">  float: right;</span><br><span class=\"line\">  clear: both;</span><br><span class=\"line\">  width: 0;</span><br><span class=\"line\">  height: calc(100% - 23px);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.text-wrapper-fulltext &#123;</span><br><span class=\"line\">  padding-right: 4px;</span><br><span class=\"line\">  font-size: 16px;</span><br><span class=\"line\">  line-height: 19px;</span><br><span class=\"line\">  letter-spacing: 0.3px;</span><br><span class=\"line\">  text-align: center;</span><br><span class=\"line\">  float: right;</span><br><span class=\"line\">  clear: both;</span><br><span class=\"line\">  color: #576b95;</span><br><span class=\"line\">  cursor: pointer;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.text-wrapper-text &#123;</span><br><span class=\"line\">  font-size: 16px;</span><br><span class=\"line\">  line-height: 23px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://codepen.io/yongqimeng/pen/abgjqpE\">full-text codepen</a></p>\n","text":"多行文本超过指定行数，进行文本截断并显示省略号，并通过展开和收起来控制是否显示全部内容，调研很多种方式，目前这个是最合适的且最终的实现方案。 具体代码 <tem...","permalink":"/post/full-text","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[{"name":"html&css","slug":"html-css","count":3,"path":"api/categories/html-css.json"}],"tags":[{"name":"html&css","slug":"html-css","count":3,"path":"api/tags/html-css.json"}],"toc":"","author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"封装canvas画分享图能力","uid":"5ec98a85a99b57e340a9a2a9ff61c2c1","slug":"canvas-screenshot","date":"2024-08-29T12:52:43.149Z","updated":"2024-08-29T12:53:27.162Z","comments":true,"path":"api/articles/canvas-screenshot.json","keywords":null,"cover":"/images/cover1.jpg","text":"整理了一下工作中封装的画分享海报的能力 class ShareCanvas { constructor(config) { this.width = confi...","permalink":"/post/canvas-screenshot","photos":[],"count_time":{"symbolsCount":"14k","symbolsTime":"13 mins."},"categories":[{"name":"canvas","slug":"canvas","count":1,"path":"api/categories/canvas.json"}],"tags":[{"name":"canvas","slug":"canvas","count":1,"path":"api/tags/canvas.json"}],"author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"git 常用命令","uid":"62bc8025e0eb197d420ffa98bc79c161","slug":"git","date":"2024-08-17T07:36:39.589Z","updated":"2024-09-05T12:53:13.881Z","comments":true,"path":"api/articles/git.json","keywords":null,"cover":"/images/cover1.jpg","text":"目前常用的git命令整理 1，git init 初始化一个新的Git仓库。 这将在当前目录中创建一个名为”.git”的子目录，Git会将所有仓库的元数据存储在其...","permalink":"/post/git","photos":[],"count_time":{"symbolsCount":"2k","symbolsTime":"2 mins."},"categories":[{"name":"git","slug":"git","count":2,"path":"api/categories/git.json"}],"tags":[{"name":"git","slug":"git","count":2,"path":"api/tags/git.json"}],"author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}
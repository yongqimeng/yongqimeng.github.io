{"title":"多行文本展开收起的实现方式","uid":"53e70211b9fa8a0658b9a8cefd096926","slug":"full-text","date":"2024-05-25T09:10:39.000Z","updated":"2024-10-09T13:24:14.021Z","comments":true,"path":"api/articles/full-text.json","keywords":null,"cover":"/images/cover1.jpg","content":"<p>多行文本超过指定行数，进行文本截断并显示省略号，并通过展开和收起来控制是否显示全部内容，调研很多种方式，目前这个是最合适的且最终的实现方案。</p>\n<p>具体代码</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div id=&quot;app&quot;&gt;</span><br><span class=\"line\">    &lt;div</span><br><span class=\"line\">      class=&quot;text-wrapper&quot;</span><br><span class=\"line\">      ref=&quot;wrapper&quot;</span><br><span class=\"line\">      :class=&quot;&#123; &#x27;text-wrapper-height&#x27;: isExpand &#125;&quot;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;div class=&quot;text-wrapper-inner&quot;&gt;</span><br><span class=\"line\">        &lt;div</span><br><span class=\"line\">          class=&quot;text-wrapper-fulltext&quot;</span><br><span class=\"line\">          @click=&quot;onActionClick&quot;</span><br><span class=\"line\">          v-if=&quot;showFillText&quot;</span><br><span class=\"line\">        &gt;</span><br><span class=\"line\">          &#123;&#123; !isExpand ? &quot;...全文&quot; : &quot;收起&quot; &#125;&#125;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &lt;div class=&quot;text-wrapper-text&quot; ref=&quot;text&quot;&gt;</span><br><span class=\"line\">          这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字这是测试字</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    return &#123;</span><br><span class=\"line\">      showFillText: false,</span><br><span class=\"line\">      isExpand: false</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  mounted() &#123;</span><br><span class=\"line\">    this.titleHeight();</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    titleHeight() &#123;</span><br><span class=\"line\">      const &#123; text, wrapper &#125; = this.$refs;</span><br><span class=\"line\">      const wrapperScrollHeight = wrapper?.scrollHeight || 0;</span><br><span class=\"line\">      const wrapperHeight = wrapper?.offsetHeight || 0;</span><br><span class=\"line\">      const contentHeight = text?.offsetHeight || 0;</span><br><span class=\"line\">      if (</span><br><span class=\"line\">        wrapperScrollHeight &gt; wrapperHeight + 10 ||</span><br><span class=\"line\">        contentHeight &gt; wrapperHeight</span><br><span class=\"line\">      ) &#123;</span><br><span class=\"line\">        this.showFillText = true;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    onActionClick() &#123;</span><br><span class=\"line\">      this.isExpand = !this.isExpand;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">body &#123;</span><br><span class=\"line\">  height: 100vh;</span><br><span class=\"line\">  display: flex;</span><br><span class=\"line\">  flex-direction: column;</span><br><span class=\"line\">  align-items: center;</span><br><span class=\"line\">  justify-content: center;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">#app &#123;</span><br><span class=\"line\">  width: 390px;</span><br><span class=\"line\">  height: auto;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.text-wrapper &#123;</span><br><span class=\"line\">  display: flex;</span><br><span class=\"line\">  max-height: 72px;</span><br><span class=\"line\">  overflow: hidden;</span><br><span class=\"line\">  position: relative;</span><br><span class=\"line\">  word-break: break-all;</span><br><span class=\"line\">  transition: max-height 0.2s linear;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.text-wrapper.text-wrapper-height &#123;</span><br><span class=\"line\">  max-height: 400px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.text-wrapper-inner &#123;</span><br><span class=\"line\">  width: 100%;</span><br><span class=\"line\">  position: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.text-wrapper-inner::before &#123;</span><br><span class=\"line\">  content: &quot;&quot;;</span><br><span class=\"line\">  float: right;</span><br><span class=\"line\">  clear: both;</span><br><span class=\"line\">  width: 0;</span><br><span class=\"line\">  height: calc(100% - 23px);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.text-wrapper-fulltext &#123;</span><br><span class=\"line\">  padding-right: 4px;</span><br><span class=\"line\">  font-size: 16px;</span><br><span class=\"line\">  line-height: 19px;</span><br><span class=\"line\">  letter-spacing: 0.3px;</span><br><span class=\"line\">  text-align: center;</span><br><span class=\"line\">  float: right;</span><br><span class=\"line\">  clear: both;</span><br><span class=\"line\">  color: #576b95;</span><br><span class=\"line\">  cursor: pointer;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.text-wrapper-text &#123;</span><br><span class=\"line\">  font-size: 16px;</span><br><span class=\"line\">  line-height: 23px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://codepen.io/yongqimeng/pen/abgjqpE\">full-text codepen</a></p>\n","text":"多行文本超过指定行数，进行文本截断并显示省略号，并通过展开和收起来控制是否显示全部内容，调研很多种方式，目前这个是最合适的且最终的实现方案。 具体代码 <tem...","permalink":"/post/full-text","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[{"name":"html&css","slug":"html-css","count":7,"path":"api/categories/html-css.json"}],"tags":[{"name":"html&css","slug":"html-css","count":3,"path":"api/tags/html-css.json"}],"toc":"","author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"记一次根据滚动方向的执行的动画","uid":"188442f1e3ef788a161e45fb6af1fd78","slug":"scroll-animation","date":"2024-07-20T07:08:38.000Z","updated":"2024-10-09T13:03:36.750Z","comments":true,"path":"api/articles/scroll-animation.json","keywords":null,"cover":"/images/cover1.jpg","text":"记录整理最近写的需求，根据滚动条判断手势滑动方向，下滑正常样式，向上滚动展示组件，这里我用一个导航栏代替 主要代码 .wrapper__nav.wrapper_...","permalink":"/post/scroll-animation","photos":[],"count_time":{"symbolsCount":"2k","symbolsTime":"2 mins."},"categories":[{"name":"vue","slug":"vue","count":2,"path":"api/categories/vue.json"}],"tags":[{"name":"animation","slug":"animation","count":2,"path":"api/tags/animation.json"}],"author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"屏幕适配方案","uid":"758086e3bca7c26b0f11ceb6e2c6e587","slug":"屏幕适配方案","date":"2024-05-18T02:26:36.000Z","updated":"2024-10-09T13:09:15.618Z","comments":true,"path":"api/articles/屏幕适配方案.json","keywords":null,"cover":"/images/cover1.jpg","text":"1.使用 @media搭配 rem 单位rem是相对于根html元素的字体大小的单位 html { font-size: 16px;}span { font-s...","permalink":"/post/屏幕适配方案","photos":[],"count_time":{"symbolsCount":"3.1k","symbolsTime":"3 mins."},"categories":[{"name":"html&css","slug":"html-css","count":7,"path":"api/categories/html-css.json"}],"tags":[{"name":"html&css","slug":"html-css","count":3,"path":"api/tags/html-css.json"}],"author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}
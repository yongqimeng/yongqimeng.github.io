{"title":"简单的数字变化动画","uid":"05fa6aa6edf6aaca899b62885f8a8f70","slug":"count-number","date":"2024-09-07T07:24:01.126Z","updated":"2024-09-07T07:24:01.126Z","comments":true,"path":"api/articles/count-number.json","keywords":null,"cover":"/images/cover1.jpg","content":"<p>记录一个简单的数字变化动画</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">animation</span>(<span class=\"params\">&#123; <span class=\"keyword\">from</span>, to, duration = <span class=\"number\">1000</span>, onUpdate &#125;</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> value = <span class=\"keyword\">from</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> start = <span class=\"title class_\">Date</span>.<span class=\"title function_\">now</span>();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> speed = (to - <span class=\"keyword\">from</span>) / duration;</span><br><span class=\"line\">  <span class=\"comment\">//让value值变化一点</span></span><br><span class=\"line\">  <span class=\"keyword\">function</span> <span class=\"title function_\">_run</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//1.改变value值</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> t = <span class=\"title class_\">Date</span>.<span class=\"title function_\">now</span>() - start;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (t &gt;= duration) &#123;</span><br><span class=\"line\">      value = to;</span><br><span class=\"line\">      onUpdate &amp;&amp; <span class=\"title function_\">onUpdate</span>(value);</span><br><span class=\"line\">      <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    value = <span class=\"keyword\">from</span> + t * speed;</span><br><span class=\"line\">    onUpdate &amp;&amp; <span class=\"title function_\">onUpdate</span>(value);</span><br><span class=\"line\">    <span class=\"comment\">//2.注册下一次变化</span></span><br><span class=\"line\">    <span class=\"title function_\">requestAnimationFrame</span>(_run);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">_run</span>();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://codepen.io/yongqimeng/pen/LYKXoLb?editors=1010\">数字变化动画-codepen</a></p>\n","text":"记录一个简单的数字变化动画 function animation({ from, to, duration = 1000, onUpdate }) { let ...","permalink":"/post/count-number","photos":[],"count_time":{"symbolsCount":533,"symbolsTime":"1 mins."},"categories":[{"name":"javascript","slug":"javascript","count":4,"path":"api/categories/javascript.json"}],"tags":[{"name":"javascript","slug":"javascript","count":2,"path":"api/tags/javascript.json"}],"toc":"","author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"滚动驱动动画animation-timeline","uid":"1fe4dcdfe1c34a2e89ece05477f6b2fb","slug":"animation-timeline","date":"2024-08-04T08:17:26.873Z","updated":"2024-08-10T10:14:49.869Z","comments":true,"path":"api/articles/animation-timeline.json","keywords":null,"cover":"/images/cover1.jpg","text":"CSS滚动驱动动画animation-timeline终于正式支持了，一些炫酷的动画终于可以用简单的写法支持啦，快来看看吧~一、快速入门 CSS 滚动驱动动画下...","permalink":"/post/animation-timeline","photos":[],"count_time":{"symbolsCount":"3.3k","symbolsTime":"3 mins."},"categories":[{"name":"css","slug":"css","count":2,"path":"api/categories/css.json"},{"name":"animation","slug":"css/animation","count":2,"path":"api/categories/css/animation.json"}],"tags":[{"name":"css","slug":"css","count":1,"path":"api/tags/css.json"}],"author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"记一次根据滚动方向的执行的动画","uid":"188442f1e3ef788a161e45fb6af1fd78","slug":"scroll-animation","date":"2024-09-05T12:16:56.515Z","updated":"2024-09-05T13:00:55.406Z","comments":true,"path":"api/articles/scroll-animation.json","keywords":null,"cover":"/images/cover1.jpg","text":"记录整理最近写的需求，根据滚动条判断手势滑动方向，下滑正常样式，向上滚动展示组件，这里我用一个导航栏代替 主要代码 .wrapper__nav.wrapper_...","permalink":"/post/scroll-animation","photos":[],"count_time":{"symbolsCount":"2k","symbolsTime":"2 mins."},"categories":[{"name":"javascript","slug":"javascript","count":4,"path":"api/categories/javascript.json"},{"name":"vue","slug":"javascript/vue","count":1,"path":"api/categories/javascript/vue.json"}],"tags":[{"name":"animation","slug":"animation","count":2,"path":"api/tags/animation.json"}],"author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}
{"title":"tabList切换动画","uid":"75d3376298d1a1243774695d34b2245b","slug":"tab","date":"2023-05-13T08:02:56.000Z","updated":"2024-10-27T03:02:23.696Z","comments":true,"path":"api/articles/tab.json","keywords":null,"cover":"/images/cover1.jpg","content":"<p>简单记录一下这个 tab 切换场景，切换 tab 时底部背景带动画切换效果，tab 自动滚动。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">initBg</span>(<span class=\"params\">index</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> tabItem = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelectorAll</span>(<span class=\"string\">&#x27;.tab__inner-item&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; tab &#125; = <span class=\"variable language_\">this</span>.<span class=\"property\">$refs</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> tbBg = <span class=\"variable language_\">this</span>.<span class=\"property\">$refs</span>.<span class=\"property\">tabbg</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!tabItem[index] &amp;&amp; !tab) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.$nextTick(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        tbBg.<span class=\"property\">style</span>.<span class=\"property\">left</span> = <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"built_in\">Math</span>.ceil(tabItem[index]?.offsetLeft)&#125;</span>px`</span>;</span><br><span class=\"line\">        tbBg.<span class=\"property\">style</span>.<span class=\"property\">width</span> = <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"built_in\">Math</span>.ceil(tabItem[index]?.getBoundingClientRect()?.width)&#125;</span>px`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">const</span> x = <span class=\"title class_\">Math</span>.<span class=\"title function_\">ceil</span>(tabItem[index]?.<span class=\"title function_\">getBoundingClientRect</span>()?.<span class=\"property\">x</span>);</span><br><span class=\"line\">        <span class=\"keyword\">const</span> scrollL = <span class=\"title class_\">Math</span>.<span class=\"title function_\">ceil</span>(tabItem[index]?.<span class=\"property\">offsetLeft</span>);</span><br><span class=\"line\">        <span class=\"keyword\">const</span> width = <span class=\"title class_\">Math</span>.<span class=\"title function_\">ceil</span>(tabItem[index]?.<span class=\"title function_\">getBoundingClientRect</span>()?.<span class=\"property\">width</span>);</span><br><span class=\"line\">        <span class=\"keyword\">const</span> &#123; clientWidth &#125; = tab;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> halfClient = clientWidth / <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (index === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        tab.<span class=\"title function_\">scrollTo</span>(&#123;</span><br><span class=\"line\">            <span class=\"attr\">left</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">            <span class=\"attr\">behavior</span>: <span class=\"string\">&#x27;smooth&#x27;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (index === <span class=\"variable language_\">this</span>.<span class=\"property\">tabList</span>.<span class=\"property\">length</span> - <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        tab.<span class=\"title function_\">scrollTo</span>(&#123;</span><br><span class=\"line\">            <span class=\"attr\">left</span>: scrollL,</span><br><span class=\"line\">            <span class=\"attr\">behavior</span>: <span class=\"string\">&#x27;smooth&#x27;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (x &gt; <span class=\"number\">0</span> &amp;&amp; scrollL &gt;= halfClient) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> r = scrollL - (halfClient - (width / <span class=\"number\">2</span>));</span><br><span class=\"line\">        tab.<span class=\"title function_\">scrollTo</span>(&#123;</span><br><span class=\"line\">            <span class=\"attr\">left</span>: r,</span><br><span class=\"line\">            <span class=\"attr\">behavior</span>: <span class=\"string\">&#x27;smooth&#x27;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        tab.<span class=\"title function_\">scrollTo</span>(&#123;</span><br><span class=\"line\">            <span class=\"attr\">left</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">            <span class=\"attr\">behavior</span>: <span class=\"string\">&#x27;smooth&#x27;</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://codepen.io/yongqimeng/pen/LYwyavd\">tab-codepen</a>;</p>\n","text":"简单记录一下这个 tab 切换场景，切换 tab 时底部背景带动画切换效果，tab 自动滚动。 initBg(index) { const tabItem = ...","permalink":"/post/tab","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"vue","slug":"vue","count":3,"path":"api/categories/vue.json"}],"tags":[{"name":"components","slug":"components","count":3,"path":"api/tags/components.json"}],"toc":"","author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"封装canvas画分享图能力","uid":"5ec98a85a99b57e340a9a2a9ff61c2c1","slug":"canvas-screenshot","date":"2023-08-20T09:18:20.000Z","updated":"2024-10-09T13:25:38.667Z","comments":true,"path":"api/articles/canvas-screenshot.json","keywords":null,"cover":"/images/cover1.jpg","text":"整理了一下工作中封装的画分享海报的能力 class ShareCanvas { constructor(config) { this.width = confi...","permalink":"/post/canvas-screenshot","photos":[],"count_time":{"symbolsCount":"14k","symbolsTime":"13 mins."},"categories":[{"name":"canvas","slug":"canvas","count":1,"path":"api/categories/canvas.json"}],"tags":[{"name":"canvas","slug":"canvas","count":1,"path":"api/tags/canvas.json"}],"author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"获取url参数，设置url参数","uid":"1e50defbd0e228f93ecdc9666a341d83","slug":"geturlparam","date":"2023-04-01T05:10:36.000Z","updated":"2024-10-13T04:32:42.142Z","comments":true,"path":"api/articles/geturlparam.json","keywords":null,"cover":"/images/cover1.jpg","text":"封装一下 获取 url 参数和设置 url 参数的方法 //设置url某个参数的方法changeUrlParameter(url, parameterName,...","permalink":"/post/geturlparam","photos":[],"count_time":{"symbolsCount":985,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"utils","slug":"utils","count":2,"path":"api/tags/utils.json"}],"author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}
{"title":"Web Animation API","uid":"da362a96629596348f7f7dfa7c5960d5","slug":"web-animation","date":"2024-02-25T08:37:38.000Z","updated":"2024-10-09T13:21:36.716Z","comments":true,"path":"api/articles/web-animation.json","keywords":null,"cover":"/images/cover1.jpg","content":"<p>简单写一个例子记录一下 Web Animation API,</p>\n<p>animate (array,Object);</p>\n<p>array: 主要传一个动画数组对象，来定义动画，对象里可以传 offest 定义时间关键帧</p>\n<p>object：{<br>duration: 1000, &#x2F;&#x2F;动画时间<br>fill: “forwards”, &#x2F;&#x2F; 同 animation-fill-mode<br>easing: ‘ease-in-out’ &#x2F;&#x2F;动画速度曲线,同animation-timing-function<br>}</p>\n<p>主要代码，书写方式和 css 动画相似，比较好上手</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">moveBall</span>(<span class=\"params\">x, y</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> rect = ball.<span class=\"title function_\">getBoundingClientRect</span>();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> ballX = rect.<span class=\"property\">left</span> + rect.<span class=\"property\">width</span> / <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> ballY = rect.<span class=\"property\">top</span> + rect.<span class=\"property\">height</span> / <span class=\"number\">2</span>;</span><br><span class=\"line\">  ball.<span class=\"title function_\">getAnimations</span>().<span class=\"title function_\">forEach</span>(<span class=\"function\">(<span class=\"params\">animation</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    animation.<span class=\"title function_\">cancel</span>();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> rad = <span class=\"title class_\">Math</span>.<span class=\"title function_\">atan2</span>(y - ballY, x - ballX);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> deg = (rad * <span class=\"number\">180</span>) / <span class=\"title class_\">Math</span>.<span class=\"property\">PI</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  ball.<span class=\"title function_\">animate</span>(</span><br><span class=\"line\">    [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">transform</span>: <span class=\"string\">`translate(<span class=\"subst\">$&#123;ballX&#125;</span>px, <span class=\"subst\">$&#123;ballY&#125;</span>px) rotate(<span class=\"subst\">$&#123;deg&#125;</span>deg)`</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">transform</span>: <span class=\"string\">`translate(<span class=\"subst\">$&#123;ballX&#125;</span>px, <span class=\"subst\">$&#123;ballY&#125;</span>px) rotate(<span class=\"subst\">$&#123;deg&#125;</span>deg) scaleX(1.5)`</span>,</span><br><span class=\"line\">        <span class=\"attr\">offset</span>: <span class=\"number\">0.6</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">transform</span>: <span class=\"string\">`translate(<span class=\"subst\">$&#123;x&#125;</span>px, <span class=\"subst\">$&#123;y&#125;</span>px) rotate(<span class=\"subst\">$&#123;deg&#125;</span>deg) scaleX(1.5)`</span>,</span><br><span class=\"line\">        <span class=\"attr\">offset</span>: <span class=\"number\">0.8</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">transform</span>: <span class=\"string\">`translate(<span class=\"subst\">$&#123;x&#125;</span>px, <span class=\"subst\">$&#123;y&#125;</span>px) rotate(<span class=\"subst\">$&#123;deg&#125;</span>deg)`</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">duration</span>: <span class=\"number\">1000</span>,</span><br><span class=\"line\">      <span class=\"attr\">fill</span>: <span class=\"string\">&quot;forwards&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">easing</span>: <span class=\"string\">&quot;ease-in-out&quot;</span>,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>总结:</p>\n<p>Web Animation 是原生支持的性能更好。<br>运行中不改变 dom，不占用主线程，性能好。</p>\n<p><a href=\"https://codepen.io/yongqimeng/pen/wvLNvrb\">animation-ball-codepen</a></p>\n","text":"简单写一个例子记录一下 Web Animation API, animate (array,Object); array: 主要传一个动画数组对象，来定义动画，...","permalink":"/post/web-animation","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"javascript","slug":"javascript","count":5,"path":"api/categories/javascript.json"}],"tags":[{"name":"Web API","slug":"Web-API","count":4,"path":"api/tags/Web-API.json"}],"toc":"","author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"EyeDropper API","uid":"318aeaee046984c3662b395e9f7232a5","slug":"EyeDropper","date":"2024-03-02T07:01:12.000Z","updated":"2024-10-16T14:59:32.317Z","comments":true,"path":"api/articles/EyeDropper.json","keywords":null,"cover":"/images/cover1.jpg","text":"创意应用通常允许用户从应用程序中的绘图或形状中取样颜色以便重用。Web 应用程序可以利用 EyeDropper API，通过浏览器提供类似的拾色器模式。 使用该...","permalink":"/post/EyeDropper","photos":[],"count_time":{"symbolsCount":987,"symbolsTime":"1 mins."},"categories":[{"name":"javascript","slug":"javascript","count":5,"path":"api/categories/javascript.json"}],"tags":[{"name":"Web API","slug":"Web-API","count":4,"path":"api/tags/Web-API.json"}],"author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":false},"next_post":{"title":"slidePicker滑动选择组件封装","uid":"90855528bf80b04a5ecf54c5c2be2ee5","slug":"slidePicker","date":"2024-01-27T10:21:06.000Z","updated":"2024-10-09T13:19:33.779Z","comments":true,"path":"api/articles/slidePicker.json","keywords":null,"cover":"/images/cover1.jpg","text":"记录一下最近封装的滑动选择器组件，支持滑动选择，支持单列，多列、无限滚动。 外层组件 <template> <div class=\"picker-box\" :s...","permalink":"/post/slidePicker","photos":[],"count_time":{"symbolsCount":"14k","symbolsTime":"13 mins."},"categories":[{"name":"vue","slug":"vue","count":3,"path":"api/categories/vue.json"}],"tags":[{"name":"components","slug":"components","count":3,"path":"api/tags/components.json"}],"author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}
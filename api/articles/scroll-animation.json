{"title":"记一次根据滚动方向的执行的动画","uid":"188442f1e3ef788a161e45fb6af1fd78","slug":"scroll-animation","date":"2024-07-20T07:08:38.000Z","updated":"2024-10-09T13:03:36.750Z","comments":true,"path":"api/articles/scroll-animation.json","keywords":null,"cover":"/images/cover1.jpg","content":"<p>记录整理最近写的需求，根据滚动条判断手势滑动方向，下滑正常样式，向上滚动展示组件，这里我用一个导航栏代替</p>\n<p>主要代码</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.wrapper__nav</span><span class=\"selector-class\">.wrapper__nav-sticky</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: sticky;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">z-index</span>: <span class=\"number\">10</span>;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: none;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.wrapper__nav</span><span class=\"selector-class\">.wrapper__nav-down</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateY</span>(-<span class=\"number\">100%</span>);</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: transform <span class=\"number\">250ms</span> ease-in-out, opacity <span class=\"number\">250ms</span> ease-in-out;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.wrapper__nav</span><span class=\"selector-class\">.wrapper__nav-up</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateY</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: transform <span class=\"number\">300ms</span> ease-in-out, opacity <span class=\"number\">300ms</span> ease-in-out;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">class</span>=<span class=\"string\">&quot;wrapper__nav&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:class</span>=<span class=\"string\">&quot;&#123;&#x27;wrapper__nav-up&#x27;: feedScrollUp,&#x27;wrapper__nav-down&#x27;: feedScrollDown,</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"tag\">        &#x27;wrapper__nav-sticky&#x27;: feedOneScreen&#125;&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wrapper__nav-inner&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wrapper__nav-item&quot;</span> <span class=\"attr\">v-for</span>=<span class=\"string\">&quot;index in 3&quot;</span> <span class=\"attr\">:key</span>=<span class=\"string\">&quot;index&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">handleScroll</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">scrollTop</span> = <span class=\"variable language_\">window</span>.<span class=\"property\">scrollY</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"property\">scrollTop</span> &lt; <span class=\"number\">300</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">feedOneScreen</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">feedScrollUp</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">feedScrollDown</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!<span class=\"variable language_\">this</span>.<span class=\"property\">scrollThrottle</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">scrollThrottle</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">lastScrollTop</span> = <span class=\"variable language_\">this</span>.<span class=\"property\">scrollTop</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">scrollThrottle</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"variable language_\">this</span>.<span class=\"property\">isOpening</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">scrollTop</span> &gt; <span class=\"variable language_\">this</span>.<span class=\"property\">lastScrollTop</span> + <span class=\"number\">10</span> &amp;&amp;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">scrollTop</span> &gt; <span class=\"number\">300</span></span><br><span class=\"line\">        ) &#123;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">isOpening</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"title function_\">closeSticky</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">isOpening</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">            &#125;, <span class=\"number\">250</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"property\">scrollTop</span> &lt; <span class=\"variable language_\">this</span>.<span class=\"property\">lastScrollTop</span> - <span class=\"number\">10</span>) &#123;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"title function_\">openSticky</span>();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;, <span class=\"number\">100</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"title function_\">openSticky</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">feedOneScreen</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">feedScrollUp</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">feedScrollDown</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"title function_\">closeSticky</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">feedScrollUp</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">feedScrollDown</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://codepen.io/yongqimeng/pen/KKjrrLm\">scroll-animation–codepen</a></p>\n","text":"记录整理最近写的需求，根据滚动条判断手势滑动方向，下滑正常样式，向上滚动展示组件，这里我用一个导航栏代替 主要代码 .wrapper__nav.wrapper_...","permalink":"/post/scroll-animation","photos":[],"count_time":{"symbolsCount":"2k","symbolsTime":"2 mins."},"categories":[{"name":"vue","slug":"vue","count":3,"path":"api/categories/vue.json"}],"tags":[{"name":"animation","slug":"animation","count":2,"path":"api/tags/animation.json"}],"toc":"","author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"逐帧动画实现无限轮播","uid":"92e648db1789cade1fa84cef6b1bbfe8","slug":"animation-steps","date":"2022-11-26T08:01:04.000Z","updated":"2024-10-09T13:12:13.695Z","comments":true,"path":"api/articles/animation-steps.json","keywords":null,"cover":"/images/cover1.jpg","text":"最近有一个无限滚动轮播的需求，最开始用js+延时器写了一版，但因为是用在首页性能消耗很大，所以想试试能不能用css搞定，嘿，还真发现了一种方法，虽然最后没有使用...","permalink":"/post/animation-steps","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[{"name":"css","slug":"css","count":2,"path":"api/categories/css.json"},{"name":"animation","slug":"css/animation","count":2,"path":"api/categories/css/animation.json"}],"tags":[{"name":"animation","slug":"animation","count":2,"path":"api/tags/animation.json"}],"author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"color_utils","uid":"287576a8923ab95c95feb27c51624507","slug":"color_utils","date":"2024-06-15T05:11:58.000Z","updated":"2024-10-27T03:03:09.471Z","comments":true,"path":"api/articles/color_utils.json","keywords":null,"cover":"/images/cover1.jpg","text":"关于一些颜色转换的封装 rgb –> to hslrgb –> to Hexhex –> to RGBhex –> to hslhsl –> to Hexhsl...","permalink":"/post/color_utils","photos":[],"count_time":{"symbolsCount":"2.6k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"utils","slug":"utils","count":2,"path":"api/tags/utils.json"}],"author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}
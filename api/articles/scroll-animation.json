{"title":"记一次根据滚动方向的执行的动画","uid":"188442f1e3ef788a161e45fb6af1fd78","slug":"scroll-animation","date":"2024-09-05T12:16:56.515Z","updated":"2024-09-05T13:00:55.406Z","comments":true,"path":"api/articles/scroll-animation.json","keywords":null,"cover":"/images/cover1.jpg","content":"<p>记录整理最近写的需求，根据滚动条判断手势滑动方向，下滑正常样式，向上滚动展示组件，这里我用一个导航栏代替</p>\n<p>主要代码</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.wrapper__nav</span><span class=\"selector-class\">.wrapper__nav-sticky</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: sticky;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">z-index</span>: <span class=\"number\">10</span>;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: none;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.wrapper__nav</span><span class=\"selector-class\">.wrapper__nav-down</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateY</span>(-<span class=\"number\">100%</span>);</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: transform <span class=\"number\">250ms</span> ease-in-out, opacity <span class=\"number\">250ms</span> ease-in-out;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.wrapper__nav</span><span class=\"selector-class\">.wrapper__nav-up</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateY</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: transform <span class=\"number\">300ms</span> ease-in-out, opacity <span class=\"number\">300ms</span> ease-in-out;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">class</span>=<span class=\"string\">&quot;wrapper__nav&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:class</span>=<span class=\"string\">&quot;&#123;&#x27;wrapper__nav-up&#x27;: feedScrollUp,&#x27;wrapper__nav-down&#x27;: feedScrollDown,</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"tag\">        &#x27;wrapper__nav-sticky&#x27;: feedOneScreen&#125;&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wrapper__nav-inner&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wrapper__nav-item&quot;</span> <span class=\"attr\">v-for</span>=<span class=\"string\">&quot;index in 3&quot;</span> <span class=\"attr\">:key</span>=<span class=\"string\">&quot;index&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">handleScroll</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">scrollTop</span> = <span class=\"variable language_\">window</span>.<span class=\"property\">scrollY</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"property\">scrollTop</span> &lt; <span class=\"number\">300</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">feedOneScreen</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">feedScrollUp</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">feedScrollDown</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!<span class=\"variable language_\">this</span>.<span class=\"property\">scrollThrottle</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">scrollThrottle</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">lastScrollTop</span> = <span class=\"variable language_\">this</span>.<span class=\"property\">scrollTop</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">scrollThrottle</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"variable language_\">this</span>.<span class=\"property\">isOpening</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">scrollTop</span> &gt; <span class=\"variable language_\">this</span>.<span class=\"property\">lastScrollTop</span> + <span class=\"number\">10</span> &amp;&amp;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">scrollTop</span> &gt; <span class=\"number\">300</span></span><br><span class=\"line\">        ) &#123;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">isOpening</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"title function_\">closeSticky</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">isOpening</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">            &#125;, <span class=\"number\">250</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"property\">scrollTop</span> &lt; <span class=\"variable language_\">this</span>.<span class=\"property\">lastScrollTop</span> - <span class=\"number\">10</span>) &#123;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"title function_\">openSticky</span>();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;, <span class=\"number\">100</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"title function_\">openSticky</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">feedOneScreen</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">feedScrollUp</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">feedScrollDown</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"title function_\">closeSticky</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">feedScrollUp</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">feedScrollDown</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://codepen.io/yongqimeng/pen/KKjrrLm\">scroll-animation–codepen</a></p>\n","text":"记录整理最近写的需求，根据滚动条判断手势滑动方向，下滑正常样式，向上滚动展示组件，这里我用一个导航栏代替 主要代码 .wrapper__nav.wrapper_...","permalink":"/post/scroll-animation","photos":[],"count_time":{"symbolsCount":"2k","symbolsTime":"2 mins."},"categories":[{"name":"javascript","slug":"javascript","count":4,"path":"api/categories/javascript.json"},{"name":"vue","slug":"javascript/vue","count":1,"path":"api/categories/javascript/vue.json"}],"tags":[{"name":"animation","slug":"animation","count":2,"path":"api/tags/animation.json"}],"toc":"","author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"简单的数字变化动画","uid":"05fa6aa6edf6aaca899b62885f8a8f70","slug":"count-number","date":"2024-09-07T07:24:01.126Z","updated":"2024-09-07T07:24:01.126Z","comments":true,"path":"api/articles/count-number.json","keywords":null,"cover":"/images/cover1.jpg","text":"记录一个简单的数字变化动画 function animation({ from, to, duration = 1000, onUpdate }) { let ...","permalink":"/post/count-number","photos":[],"count_time":{"symbolsCount":533,"symbolsTime":"1 mins."},"categories":[{"name":"javascript","slug":"javascript","count":4,"path":"api/categories/javascript.json"}],"tags":[{"name":"javascript","slug":"javascript","count":2,"path":"api/tags/javascript.json"}],"author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"记一次git报错","uid":"c0b4ed83bb36ebf80bf9643e36e3db7c","slug":"git-clone-error","date":"2024-09-05T12:16:52.568Z","updated":"2024-09-05T12:16:52.568Z","comments":true,"path":"api/articles/git-clone-error.json","keywords":null,"cover":"/images/cover1.jpg","text":"记一次使用git报错，解决Unable to negotiate with **** port 22: no matching host key type fo...","permalink":"/post/git-clone-error","photos":[],"count_time":{"symbolsCount":868,"symbolsTime":"1 mins."},"categories":[{"name":"git","slug":"git","count":2,"path":"api/categories/git.json"}],"tags":[{"name":"git","slug":"git","count":2,"path":"api/tags/git.json"}],"author":{"name":"M","slug":"blog-author","avatar":"/images/avatar.jpg","link":"/","description":"这是我的博客","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}